<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Studio | Beals.wav</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-T4926KVF6L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-T4926KVF6L');
  </script>

  <!-- Retro Font -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://player.beatstars.com">
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

  <style>
    :root{
      --glow:#00e0e0;     /* match index */
      --accent:#ff5c7a;   /* match index */
      --bg-dark:#0f0f0f;
      --text:#f5f5f5;
    }

    /* RESET */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{width:100%;height:100%;overflow-x:hidden}
    body{font-family:'Press Start 2P',cursive;background:var(--bg-dark);color:var(--text)}
    a{color:var(--glow);text-decoration:none}

    /* HEADER (unified) */
    header{
      position:fixed;top:0;left:0;width:100%;z-index:999;
      background:rgba(0,0,0,.9);border-bottom:1px solid #222;padding:1rem;
    }
    .header-container{
      display:flex;align-items:center;justify-content:space-between;
      max-width:1400px;margin:0 auto;padding:.5rem 2rem;
    }
    .logo{
      font-size:1.4rem;color:var(--glow);
      text-shadow:0 0 5px var(--glow),0 0 10px var(--glow);
      text-decoration:none;margin-right:1rem;
    }
    .nav-menu{flex:1;display:flex;justify-content:center}
    .nav-menu ul{list-style:none;display:flex;gap:1.5rem}
    .nav-menu li{display:flex;flex-direction:column;align-items:center;text-align:center}
    .nav-menu a{
      color:var(--accent);text-decoration:none;font-size:.75rem;
      transition:color .2s ease;line-height:1.2;text-align:center;
    }
    .nav-menu a:hover{color:var(--glow)}
    .subtext{font-size:.45rem;color:#aaa;margin-top:.15rem;text-align:center}

    header .header-buttons{display:flex;gap:1rem;align-items:center}
    header .login-btn{
      background:var(--glow);color:#000;font-size:.8rem;
      padding:.5rem 1rem;border-radius:5px;white-space:nowrap;
    }
    header .hamburger{
      font-size:1.5rem;line-height:1;color:var(--accent);
      background:transparent;border:none;cursor:pointer;display:none;
      appearance:none;-webkit-appearance:none;
    }

    /* SIDEBAR (align with other pages) */
    .sidebar{
      position:fixed;top:70px;left:-220px;width:200px;height:calc(100% - 70px);
      background:#111;padding:1.5rem 1rem;z-index:998;transition:left .3s ease;
    }
    .sidebar.open{left:0}
    .sidebar ul{list-style:none;display:flex;flex-direction:column;gap:1rem}
    .sidebar a{font-size:.9rem;color:var(--glow)}

    /* MAIN WRAPPER */
    .container{max-width:1200px;margin:120px auto 4rem;padding:1rem 1rem 7rem;} /* bottom pad for ticker */

    /* TICKER */
    .ticker{
      position:fixed;bottom:0;width:100%;height:25px;background:#000;overflow:hidden;border-top:1px solid #222;z-index:998;
    }
    .ticker-content{
      white-space:nowrap;display:inline-block;padding-left:100%;
      animation:scroll 30s linear infinite,colorchange 10s infinite alternate;
      font-size:.65rem;font-weight:bold;
    }
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}
    @keyframes colorchange{
      0%{color:#00ffff}25%{color:#ff5c7a}50%{color:#a0ff00}75%{color:#ff00ff}100%{color:#00ffff}
    }

    /* SECTION STYLES */
    .section{margin-bottom:2rem;background:#111;padding:1rem;border-radius:8px}
    .section h2{color:var(--glow);font-size:1.1rem;margin-bottom:.5rem}
    .section p{font-size:.8rem;margin-bottom:1rem;font-family:Arial,sans-serif;color:#fff}
    .section button{
      font-family:'Press Start 2P',cursive;font-size:.65rem;padding:.5rem .75rem;border:none;border-radius:4px;cursor:pointer
    }
    .book-now-btn{background:var(--glow);color:#000}
    .show-services-btn{background:var(--glow);color:#000;margin-bottom:1rem}

    /* VIRTUAL SERVICES GRID */
    .virtual-services{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem}
    .service-card{background:#111;padding:1rem;border-radius:8px;border:1px solid #333;font-family:Arial,sans-serif;color:#fff}
    .service-card h3{font-size:1rem;margin-bottom:.5rem;color:var(--accent)}
    .service-card p{font-size:.8rem;margin-bottom:.5rem}
    .service-card button{background:var(--glow);color:#000;font-size:.65rem;padding:.5rem .75rem;border:none;border-radius:4px;cursor:pointer}

    /* SLIDESHOW */
    .studio-slideshow{text-align:center;margin-bottom:3rem}
    .studio-slideshow h2{margin-bottom:1rem;font-size:1rem;color:var(--glow)}
    .slideshow-container{
      width:90%;max-width:720px;margin:0 auto;position:relative;border-radius:10px;
      box-shadow:0 0 12px var(--accent);overflow:hidden;min-height:500px;display:flex;align-items:center;justify-content:center;
    }
    #imageSlider img{width:100%;height:auto;object-fit:contain;border-radius:10px}

    /* MODAL */
    .modal-overlay{
      position:fixed;display:none;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,.7);justify-content:center;align-items:center;z-index:1000;
    }
    .modal-content{
      background:#222;padding:20px;border-radius:10px;width:90%;max-width:400px;color:#fff;text-align:left;font-family:Arial,sans-serif;
    }
    .modal-content h2{font-size:1rem;margin-bottom:10px}
    .modal-content p{font-size:.7rem;margin-bottom:10px}
    .modal-input,.modal-textarea{width:100%;padding:8px;margin-bottom:10px;border:1px solid #ccc;border-radius:4px;font-size:.8rem}
    .modal-buttons{display:flex;justify-content:flex-end;gap:10px}
    .modal-buttons button{padding:8px 15px;font-size:.8rem;border:none;border-radius:5px;cursor:pointer}
    .btn-cancel{background:var(--accent);color:#fff}
    .btn-submit{background:var(--glow);color:#000}

    /* CART & TOAST (unchanged) */
    .cart-modal{
      position:fixed;top:70px;right:20px;width:300px;background:#111;border:1px solid #444;padding:1rem;display:none;z-index:1000;
    }
    .cart-modal h3{font-size:.65rem;margin-bottom:1rem;color:var(--glow)}
    .close-cart{position:absolute;top:5px;right:10px;background:none;border:none;font-size:1rem;color:var(--accent);cursor:pointer}
    .cart-item{font-size:.6rem;border-bottom:1px solid #333;padding:.5rem 0}
    .cart-item button{float:right;background:none;color:var(--accent);border:none;font-size:.7rem;cursor:pointer}
    .promo-input{width:100%;background:#222;color:#fff;padding:.4rem;font-size:.6rem;margin:.5rem 0;border:1px solid #444;border-radius:4px}
    .cart-total{font-weight:bold;margin-top:.5rem;font-size:.6rem}
    .checkout-btn{width:100%;margin-top:.5rem;background:var(--glow);color:#000;font-weight:bold;font-size:.6rem;padding:.5rem;border:none;border-radius:4px;cursor:pointer}
    .toast{
      position:fixed;top:10px;right:20px;background:#0f0f0f;color:#fff;padding:10px 15px;border-radius:5px;font-size:.7rem;border:1px solid var(--accent);z-index:1100;display:none;
    }

    /* FOOTER NAV BUTTONS (unified) */
    .footer-nav{text-align:center;margin:3rem auto 6rem}
    .footer-buttons{display:flex;flex-wrap:wrap;justify-content:center;gap:1rem}
    .footer-buttons a{
      display:inline-block;padding:.7rem 1.2rem;border-radius:8px;font-size:.75rem;color:#000;background:var(--glow);
      text-decoration:none;transition:background .2s ease,transform .2s ease,box-shadow .2s ease;box-shadow:0 0 6px var(--glow);border:1px solid var(--glow);
    }
    .footer-buttons a:hover{background:var(--accent);color:#fff;transform:scale(1.05);box-shadow:0 0 12px var(--accent);border-color:var(--accent)}
    @media (max-width:600px){
      .footer-buttons{flex-direction:column;gap:.75rem}
      .footer-buttons a{width:90%;max-width:300px;margin:0 auto}
    }

    /* MOBILE */
    @media (max-width:768px){
      .logo{font-size:1.1rem}
      .header-container{padding:0 1rem}
      header .header-buttons{gap:.5rem}
      header .login-btn{font-size:.65rem;padding:.3rem .6rem}
      header .hamburger{display:inline-block}        /* show ‚ò∞ on mobile */
      .nav-menu{display:none}                        /* hide desktop nav */
      .sidebar{width:200px}

      .slideshow-container{min-height:auto}
      #imageSlider img{max-height:300px;object-fit:contain}
    }

    /* DESKTOP polish */
    @media (min-width:1024px){
      .nav-menu a{font-size:.95rem}
      .subtext{font-size:.6rem}
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header id="mainHeader">
    <div class="header-container">
      <a href="index.html" class="logo">BEALS.WAV</a>
      <nav class="nav-menu">
        <ul>
          <li><a href="music.html">Music</a><span class="subtext">Listen to my songs</span></li>
          <li><a href="beatstore.html">Beats</a><span class="subtext">Buy instrumentals</span></li>
          <li><a href="studio.html">Studio</a><span class="subtext">Book studio time</span></li>
          <li><a href="faq.html">FAQ</a><span class="subtext">Questions answered</span></li>
          <li><a href="contact.html">Contact</a><span class="subtext">Reach out directly</span></li>
        </ul>
      </nav>
      <div class="header-buttons">
        <a href="login.html" class="login-btn" id="loginBtn">Login</a>
        <button class="hamburger" onclick="toggleSidebar()" aria-label="Toggle navigation menu">‚ò∞</button>
      </div>
    </div>
  </header>

  <!-- SIDEBAR -->
  <div class="sidebar" id="sidebar">
    <ul>
      <li><a href="music.html">üéµ Music</a></li>
      <li><a href="beatstore.html">üíΩ Beats</a></li>
      <li><a href="studio.html">üéöÔ∏è Studio</a></li>
      <li><a href="faq.html">üìñ FAQ</a></li>
      <li><a href="contact.html">‚úâÔ∏è Contact</a></li>
    </ul>
  </div>

  <!-- BOGO MODAL (unchanged) -->
  <div class="bogo-overlay" id="bogoOverlay">
    <div class="bogo-modal-content">
      <h2>BOGO Promo</h2>
      <p>You have an odd number of eligible beats.<br/>Add another beat for free or continue anyway.</p>
      <div class="bogo-actions">
        <button class="bogo-btn" id="bogoAddBeatBtn">Add Another</button>
        <button class="bogo-btn bogo-btn-alt" id="bogoProceedBtn">Proceed</button>
      </div>
    </div>
  </div>

  <!-- MAIN -->
  <div class="container">
    <section class="section" id="inPersonSection">
      <h2 style="font-size:1.2rem;">In-Person Studio Sessions</h2>
      <p style="font-size:1rem;margin-bottom:1rem;">
        Secure your session in our West Jordan, UT studio ‚Äì no upfront payment required. Our team ensures a flawless recording experience.
      </p>
      <button class="book-now-btn" onclick="toggleInPersonDetails()">Book Now</button>
      <div id="inPersonDetails" style="display:none;margin-top:1rem;background:#222;padding:1rem;border-radius:8px;font-family:Arial,sans-serif;">
        <h3 style="font-size:1.1rem;color:var(--glow);margin-bottom:.75rem;">Session Pricing &amp; Rules</h3>
        <ul style="list-style:disc;margin-left:1.5rem;font-size:.9rem;line-height:1.5;margin-bottom:1rem;">
          <li><strong>$30/hour</strong> (2-hour, $60 minimum)</li>
          <li>Every 2 hours booked grants an extra 30 minutes free</li>
          <li>Mixing costs an additional <strong>$20</strong> per song</li>
          <li>Max 2 people per session</li>
          <li>Our audio engineer will guide your session</li>
          <li>No smoking indoors ‚Äì please respect the space and gear</li>
        </ul>
        <p style="font-size:.9rem;margin-bottom:1rem;line-height:1.5;">
          The full studio address is shared only after booking confirmation. Our studio team will contact you within 24 hours after booking. we require payment of 50% upfront and 50% upon final delivery.
          Questions? <a href="contact.html" style="color:var(--glow);text-decoration:underline;">Contact Us</a>
        </p>
        <label style="display:inline-block;font-size:.9rem;cursor:pointer;">
          <input type="checkbox" id="agreeCheckbox" onclick="toggleBookingButton()"> Click here to agree + continue booking
        </label>
        <div style="margin-top:1rem;">
          <button class="book-now-btn" id="inPersonBookBtn" style="display:none;" onclick="proceedToCalendly()">Confirm &amp; Book</button>
        </div>
      </div>
    </section>

    <section class="section">
      <h2 style="font-size:1.2rem;">Virtual Studio Services</h2>
      <p style="font-size:1rem;">
        Request our professional services for virtual projects such as mixing, mastering, video editing, custom beat creation, and more.
        Please review the service details below and submit a request with your specifications.
      </p>
      <button class="show-services-btn" onclick="toggleServices()">Book Now</button>
      <div id="hidden-services" style="display:none;">
        <div class="virtual-services">
          <div class="service-card">
            <h3>Mixing a Song</h3>
            <p>Bring your track to life with professional mixing. <br><strong>Price: $49.99+</strong></p>
            <button onclick="openServiceRequestModal('Mixing a Song')">Request Service</button>
          </div>
          <div class="service-card">
            <h3>Mixing + Mastering</h3>
            <p>Get a completely polished sound. <br><strong>Price: $69.99+</strong></p>
            <button onclick="openServiceRequestModal('Mixing + Mastering')">Request Service</button>
          </div>
          <div class="service-card">
            <h3>Video Editing/Recording</h3>
            <p>Create professional music videos. <br><strong>Price: $89.99+</strong></p>
            <button onclick="openServiceRequestModal('Video Editing/Recording')">Request Service</button>
          </div>
          <div class="service-card">
            <h3>Custom Beat Creation</h3>
            <p>Unique beats tailored to your style. <br><strong>Price: $99.99+</strong></p>
            <button onclick="openServiceRequestModal('Custom Beat Creation')">Request Service</button>
          </div>
          <div class="service-card">
            <h3>Artist Coaching & Development</h3>
            <p>Expert guidance on career growth, songwriting, etc. <br><strong>Price: Negotiable</strong></p>
            <button onclick="openServiceRequestModal('Artist Coaching & Development')">Request Service</button>
          </div>
        </div>
      </div>
    </section>

    <section class="studio-slideshow">
      <h2 style="font-size:1rem;">Peek Inside the Studio</h2>
      <div class="slideshow-container">
        <div id="imageSlider"></div>
      </div>
    </section>
  </div>

  <!-- FOOTER NAV BUTTONS -->
  <section class="footer-nav">
    <div class="footer-buttons">
      <a href="music.html">Music</a>
      <a href="beatstore.html">Beats</a>
      <a href="studio.html">Studio</a>
      <a href="faq.html">FAQ</a>
      <a href="contact.html">Contact</a>
    </div>
  </section>

  <!-- TICKER -->
  <div class="ticker">
    <div class="ticker-content">
      Beals {Musician} + {Rapper} + {Beat Maker} ‚Äî Beals.wav {Recording Studio} ‚Äî {Recording Services} + {Mixing Services} + {Advertising} + {Music Videos} + {Lyric/songwriting} ‚Äî Based in West Jordan, Utah ‚Äî ¬© 2025 Beals.wav. All rights reserved. ‚Äî New release out now! ‚Äî
    </div>
  </div>

  <!-- CART/TOAST -->
  <div class="toast" id="toast">Added to cart</div>
  <div class="cart-modal" id="cartModal">
    <button class="close-cart" onclick="toggleCart()">‚úñ</button>
    <h3>Your Cart</h3>
    <div id="cartItems"></div>
    <input class="promo-input" id="promoCode" placeholder="Promo code (e.g. BEALS15)" />
    <div class="cart-total" id="cartTotal">Total: $0.00</div>
    <button class="checkout-btn" onclick="checkout()">Checkout</button>
  </div>

  <script>
    /* Header helpers */
    function toggleSidebar(){ document.getElementById('sidebar').classList.toggle('open'); }

    // Login sync
    function checkLoginStatus(){
      const btn=document.getElementById('loginBtn');
      if(!btn) return;
      const inL=localStorage.getItem('loggedIn')==='true';
      btn.textContent=inL?'Account':'Login';
      btn.href=inL?'account.html':'login.html';
    }
    document.addEventListener('DOMContentLoaded',checkLoginStatus);

    /* In-person collapsible */
    function toggleInPersonDetails(){
      const el=document.getElementById('inPersonDetails');
      el.style.display=(el.style.display==='none'||!el.style.display)?'block':'none';
    }
    function toggleBookingButton(){
      const on=document.getElementById('agreeCheckbox').checked;
      document.getElementById('inPersonBookBtn').style.display=on?'inline-block':'none';
    }
    function proceedToCalendly(){ window.open('https://calendly.com/beals-wav/30min','_blank'); }

    /* Virtual services toggle */
    function toggleServices(){
      const hs=document.getElementById('hidden-services');
      hs.style.display=(hs.style.display==='block')?'none':'block';
    }

    /* EmailJS init */
    window.addEventListener("load", function(){
      if(window.emailjs && emailjs.init){
        emailjs.init("OLr0UvCY_0eYzwwFV");
      }
    });

    /* Service request modal */
    function openServiceRequestModal(serviceName){
      document.getElementById("serviceModalTitle").textContent=serviceName+" Request";
      document.getElementById("serviceRequestModal").style.display="flex";
    }
    function closeServiceRequestModal(){
      document.getElementById("serviceRequestModal").style.display="none";
      document.getElementById("serviceRequestForm").reset();
    }
    document.getElementById("serviceRequestForm").addEventListener("submit",function(e){
      e.preventDefault();
      const name=document.getElementById("requestName").value.trim();
      const email=document.getElementById("requestEmail").value.trim();
      const budget=document.getElementById("requestBudget").value.trim();
      const turnaround=document.getElementById("requestTurnaround").value.trim();
      const details=document.getElementById("requestDetails").value.trim();
      const serviceRequested=document.getElementById("serviceModalTitle").textContent.trim();

      const payload={service:serviceRequested,name,email,budget,turnaround,details};
      emailjs.send("service_wrssjc7","template_kr5nl9p",payload)
        .then(function(){
          fetch("/save-session",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({email,serviceType:serviceRequested,dateBooked:new Date().toISOString(),details})
          })
          .then(r=>r.json())
          .then(()=>{ alert("Your request has been received and saved! We will contact you within 24-48 hours."); closeServiceRequestModal(); })
          .catch(()=>{ alert("Email sent, but there was an error saving your session. Please contact support."); });
        })
        .catch(()=>{ alert("There was an error sending your request. Please try again later."); });
    });

    /* Cart & toast */
    function toggleCart(){
      const m=document.getElementById("cartModal");
      m.style.display=(m.style.display==="block")?"none":"block";
      renderCart();
    }
    function showToast(msg){
      const t=document.getElementById("toast"); t.innerText=msg; t.style.display="block";
      setTimeout(()=>t.style.display="none",2000);
    }
    let cart=JSON.parse(sessionStorage.getItem("beatCart"))||[];
    function renderCart(){
      const c=document.getElementById("cartItems"); if(!c) return;
      c.innerHTML=""; let total=0;
      cart.forEach((i,idx)=>{ total+=i.price;
        c.innerHTML+=`<div class="cart-item">${i.title} (${i.license}) - $${i.price.toFixed(2)} <button onclick="removeFromCart(${idx})">‚úï</button></div>`;
      });
      const promo=(document.getElementById("promoCode")?.value||"").trim().toUpperCase();
      if(promo==="BEALS15") total*=0.85;
      const totalEl=document.getElementById("cartTotal"); if(totalEl){ totalEl.innerText="Total: $"+total.toFixed(2); }
    }
    function removeFromCart(idx){
      cart.splice(idx,1); sessionStorage.setItem("beatCart",JSON.stringify(cart)); renderCart();
    }

    /* BOGO */
    const bogoOverlay=document.getElementById("bogoOverlay");
    const bogoAddBeatBtn=document.getElementById("bogoAddBeatBtn");
    const bogoProceedBtn=document.getElementById("bogoProceedBtn");
    bogoAddBeatBtn.onclick=()=>{ location.href="beatstore.html"; };
    bogoProceedBtn.onclick=()=>{ bogoOverlay.style.display="none"; finalizeCheckout(); };
    function checkBogo(){
      const ct=cart.filter(it=>it.license!=="Exclusive").length;
      if(ct%2!==0 && ct>0){ bogoOverlay.style.display="flex"; return false; }
      return true;
    }
    async function checkout(){
      if(!cart.length) return showToast("Your cart is empty.");
      if(!checkBogo()) return;
      finalizeCheckout();
    }
    async function finalizeCheckout(){
      const email=prompt("Enter your email to proceed with checkout:");
      if(!email || !/\S+@\S+\.\S+/.test(email)) return showToast("Please enter a valid email.");
      try{
        const res=await fetch("http://localhost:4242/create-checkout-session",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({cartItems:cart,customerEmail:email})
        });
        const data=await res.json();
        if(data.url){ location.href=data.url; } else { showToast("Error creating checkout session."); }
      }catch{ showToast("Checkout failed. Try again."); }
    }
  </script>
</body>
</html>
